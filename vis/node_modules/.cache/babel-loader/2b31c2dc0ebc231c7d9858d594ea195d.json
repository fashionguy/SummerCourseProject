{"ast":null,"code":"var _jsxFileName = \"/Users/saber/Desktop/vis/src/graph.jsx\";\nimport React, { Component } from \"react\";\nimport * as d3 from \"d3\";\n\nclass Graph extends Component {\n  componentWillReceiveProps(props) {\n    const graph = props.graph;\n    const graphSVG = d3.select(\"#graph\");\n    const padding = 100;\n    const width = graphSVG.node().parentNode.clientWidth;\n    graphSVG.attr(\"width\", width).attr(\"height\", width);\n    graphSVG.select(\".nodes\").remove();\n    graphSVG.select(\".links\").remove();\n    const simulation = d3.forceSimulation().force(\"link\", d3.forceLink().id(function (d) {\n      return d.id;\n    }).distance(30)).force(\"charge\", d3.forceManyBody()).force(\"center\", d3.forceCenter(width / 2, width / 2));\n    simulation.nodes(graph.nodes).on(\"tick\", ticked);\n    console.log(graph);\n    simulation.force(\"link\").links(graph.links);\n    const link = graphSVG.append(\"g\").attr(\"class\", \"links\").selectAll(\"line\").data(graph.links).enter().append(\"line\").attr(\"stroke\", \"#0099ff\").attr(\"stroke-linecap\", \"round\").attr(\"opacity\", function (d, i) {\n      var delta = 50;\n      return i / delta;\n    }).attr(\"stroke-width\", function (d, i) {\n      return Math.sqrt(graph.links[i].weight) + 1;\n    });\n    const node = graphSVG.append(\"g\").attr(\"class\", \"nodes\").selectAll(\"circle\").data(graph.nodes).enter().append(\"circle\").attr(\"r\", 3);\n\n    function ticked() {\n      let max = {};\n      let min = {};\n      max.x = d3.max(graph.nodes, n => n.x);\n      max.y = d3.max(graph.nodes, n => n.y);\n      min.x = d3.min(graph.nodes, n => n.x);\n      min.y = d3.min(graph.nodes, n => n.y);\n      const xScale = d3.scaleLinear().domain([min.x, max.x]).range([padding, width - padding]);\n      const yScale = d3.scaleLinear().domain([min.y, max.y]).range([padding, width - padding]);\n      link.attr(\"x1\", function (d) {\n        return xScale(d.source.x);\n      }).attr(\"y1\", function (d) {\n        return yScale(d.source.y);\n      }).attr(\"x2\", function (d) {\n        return xScale(d.target.x);\n      }).attr(\"y2\", function (d) {\n        return yScale(d.target.y);\n      });\n      node.attr(\"cx\", function (d) {\n        return xScale(d.x);\n      }).attr(\"cy\", function (d) {\n        return yScale(d.y);\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(\"svg\", {\n      id: \"graph\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default Graph;","map":{"version":3,"sources":["/Users/saber/Desktop/vis/src/graph.jsx"],"names":["React","Component","d3","Graph","componentWillReceiveProps","props","graph","graphSVG","select","padding","width","node","parentNode","clientWidth","attr","remove","simulation","forceSimulation","force","forceLink","id","d","distance","forceManyBody","forceCenter","nodes","on","ticked","console","log","links","link","append","selectAll","data","enter","i","delta","Math","sqrt","weight","max","min","x","n","y","xScale","scaleLinear","domain","range","yScale","source","target","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\"\nimport * as d3 from \"d3\"\n\nclass Graph extends Component {\n    componentWillReceiveProps(props) {\n        const graph = props.graph\n        const graphSVG = d3.select(\"#graph\")\n        const padding = 100\n        const width = graphSVG.node().parentNode.clientWidth\n        graphSVG.attr(\"width\", width).attr(\"height\", width)\n        graphSVG.select(\".nodes\").remove()\n        graphSVG.select(\".links\").remove()\n\n        const simulation = d3\n            .forceSimulation()\n            .force(\n                \"link\",\n                d3.forceLink().id(function(d) {\n                    return d.id\n                }).distance(30)\n            )\n            .force(\"charge\", d3.forceManyBody())\n            .force(\"center\", d3.forceCenter(width / 2, width / 2))\n\n        simulation.nodes(graph.nodes).on(\"tick\", ticked)\n        console.log(graph)\n        simulation.force(\"link\").links(graph.links)\n        const link = graphSVG\n\n            .append(\"g\")\n            .attr(\"class\", \"links\")\n            .selectAll(\"line\")\n            .data(graph.links)\n            .enter()\n            .append(\"line\")\n            .attr(\"stroke\", \"#0099ff\")\n            .attr(\"stroke-linecap\", \"round\")\n            .attr(\"opacity\", function(d, i){\n                var delta = 50;\n                return i / delta;\n            })\n            .attr(\"stroke-width\", function(d, i){\n                return Math.sqrt(graph.links[i].weight) + 1;\n             })\n\n        const node = graphSVG\n            .append(\"g\")\n            .attr(\"class\", \"nodes\")\n            .selectAll(\"circle\")\n            .data(graph.nodes)\n            .enter()\n            .append(\"circle\")\n            .attr(\"r\", 3)\n            \n        function ticked() {\n            let max = {}\n            let min = {}\n            max.x = d3.max(graph.nodes, n => n.x)\n            max.y = d3.max(graph.nodes, n => n.y)\n            min.x = d3.min(graph.nodes, n => n.x)\n            min.y = d3.min(graph.nodes, n => n.y)\n            const xScale = d3\n                .scaleLinear()\n                .domain([min.x, max.x])\n                .range([padding, width - padding])\n            const yScale = d3\n                .scaleLinear()\n                .domain([min.y, max.y])\n                .range([padding, width - padding])\n            link.attr(\"x1\", function(d) {\n                return xScale(d.source.x)\n            })\n                .attr(\"y1\", function(d) {\n                    return yScale(d.source.y)\n                })\n                .attr(\"x2\", function(d) {\n                    return xScale(d.target.x)\n                })\n                .attr(\"y2\", function(d) {\n                    return yScale(d.target.y)\n                })\n            node.attr(\"cx\", function(d) {\n                return xScale(d.x)\n            }).attr(\"cy\", function(d) {\n                return yScale(d.y)\n            })\n        }\n    }\n    render() {\n        return <svg id=\"graph\" />\n    }\n}\n\nexport default Graph\n"]},"metadata":{},"sourceType":"module"}