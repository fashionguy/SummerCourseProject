{"ast":null,"code":"var _jsxFileName = \"/Users/saber/Desktop/vis/src/graph.jsx\";\nimport React, { Component } from \"react\";\nimport * as d3 from \"d3\";\n\nclass Graph extends Component {\n  componentWillReceiveProps(props) {\n    const graph = props.graph;\n    const graphSVG = d3.select(\"#graph\");\n    const padding = 100;\n    const width = graphSVG.node().parentNode.clientWidth;\n    graphSVG.attr(\"width\", width).attr(\"height\", width);\n    graphSVG.select(\".nodes\").remove();\n    graphSVG.select(\".links\").remove();\n    const simulation = d3.forceSimulation().force(\"link\", d3.forceLink().id(function (d) {\n      return d.id;\n    })).force(\"charge\", d3.forceManyBody()).force(\"center\", d3.forceCenter(width / 2, width / 2));\n    simulation.nodes(graph.nodes).on(\"tick\", ticked);\n    console.log(graph);\n    simulation.force(\"link\").links(graph.links);\n    const link = graphSVG.append(\"g\").attr(\"class\", \"links\").selectAll(\"line\").data(graph.links).enter().append(\"line\").attr(\"stroke\", \"#4d4dff\").attr(\"stroke-width\", function (d, i) {\n      return Math.sqrt(graph.links[i].weight) + 1;\n    });\n    const node = graphSVG.append(\"g\").attr(\"class\", \"nodes\").selectAll(\"circle\").data(graph.nodes).enter().append(\"circle\").attr(\"r\", 3);\n\n    function ticked() {\n      let max = {};\n      let min = {};\n      max.x = d3.max(graph.nodes, n => n.x);\n      max.y = d3.max(graph.nodes, n => n.y);\n      min.x = d3.min(graph.nodes, n => n.x);\n      min.y = d3.min(graph.nodes, n => n.y);\n      const xScale = d3.scaleLinear().domain([min.x, max.x]).range([padding, width - padding]);\n      const yScale = d3.scaleLinear().domain([min.y, max.y]).range([padding, width - padding]);\n      link.attr(\"x1\", function (d) {\n        return xScale(d.source.x);\n      }).attr(\"y1\", function (d) {\n        return yScale(d.source.y);\n      }).attr(\"x2\", function (d) {\n        return xScale(d.target.x);\n      }).attr(\"y2\", function (d) {\n        return yScale(d.target.y);\n      });\n      node.attr(\"cx\", function (d) {\n        return xScale(d.x);\n      }).attr(\"cy\", function (d) {\n        return yScale(d.y);\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(\"svg\", {\n      id: \"graph\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default Graph;","map":{"version":3,"sources":["/Users/saber/Desktop/vis/src/graph.jsx"],"names":["React","Component","d3","Graph","componentWillReceiveProps","props","graph","graphSVG","select","padding","width","node","parentNode","clientWidth","attr","remove","simulation","forceSimulation","force","forceLink","id","d","forceManyBody","forceCenter","nodes","on","ticked","console","log","links","link","append","selectAll","data","enter","i","Math","sqrt","weight","max","min","x","n","y","xScale","scaleLinear","domain","range","yScale","source","target","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\"\nimport * as d3 from \"d3\"\n\nclass Graph extends Component {\n    componentWillReceiveProps(props) {\n        const graph = props.graph\n        const graphSVG = d3.select(\"#graph\")\n        const padding = 100\n        const width = graphSVG.node().parentNode.clientWidth\n        graphSVG.attr(\"width\", width).attr(\"height\", width)\n        graphSVG.select(\".nodes\").remove()\n        graphSVG.select(\".links\").remove()\n\n        const simulation = d3\n            .forceSimulation()\n            .force(\n                \"link\",\n                d3.forceLink().id(function(d) {\n                    return d.id\n                })\n            )\n            .force(\"charge\", d3.forceManyBody())\n            .force(\"center\", d3.forceCenter(width / 2, width / 2))\n\n        simulation.nodes(graph.nodes).on(\"tick\", ticked)\n        console.log(graph)\n        simulation.force(\"link\").links(graph.links)\n        const link = graphSVG\n\n            .append(\"g\")\n            .attr(\"class\", \"links\")\n            .selectAll(\"line\")\n            .data(graph.links)\n            .enter()\n            .append(\"line\")\n            .attr(\"stroke\", \"#4d4dff\")\n            .attr(\"stroke-width\", function(d, i){\n                return Math.sqrt(graph.links[i].weight) + 1;\n             })\n\n        const node = graphSVG\n            .append(\"g\")\n            .attr(\"class\", \"nodes\")\n            .selectAll(\"circle\")\n            .data(graph.nodes)\n            .enter()\n            .append(\"circle\")\n            .attr(\"r\", 3)\n            \n        function ticked() {\n            let max = {}\n            let min = {}\n            max.x = d3.max(graph.nodes, n => n.x)\n            max.y = d3.max(graph.nodes, n => n.y)\n            min.x = d3.min(graph.nodes, n => n.x)\n            min.y = d3.min(graph.nodes, n => n.y)\n            const xScale = d3\n                .scaleLinear()\n                .domain([min.x, max.x])\n                .range([padding, width - padding])\n            const yScale = d3\n                .scaleLinear()\n                .domain([min.y, max.y])\n                .range([padding, width - padding])\n            link.attr(\"x1\", function(d) {\n                return xScale(d.source.x)\n            })\n                .attr(\"y1\", function(d) {\n                    return yScale(d.source.y)\n                })\n                .attr(\"x2\", function(d) {\n                    return xScale(d.target.x)\n                })\n                .attr(\"y2\", function(d) {\n                    return yScale(d.target.y)\n                })\n            node.attr(\"cx\", function(d) {\n                return xScale(d.x)\n            }).attr(\"cy\", function(d) {\n                return yScale(d.y)\n            })\n        }\n    }\n    render() {\n        return <svg id=\"graph\" />\n    }\n}\n\nexport default Graph\n"]},"metadata":{},"sourceType":"module"}